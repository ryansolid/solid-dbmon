!function(){"use strict";function e(e,n){const t=p(),l=d,r=null===a;t.owner=h,h=t,d=t,n=r?function(e,n){a=c,c.changes.reset(),c.updates.reset();try{return e(n)}finally{h=d=a=null}}(e,n):e(n),h=t.owner,d=l,C(t),y(t,e,n,!1),r&&function(e,n){if(c.changes.count>0||c.updates.count>0){c.time++;try{w(c)}finally{a=null,h=e,d=n}}}(h,l)}function n(e,n){let t,l=0===e.length?null:function(){null===r||(null!==a?c.disposes.add(r):k(r))},r=null===l?f:p(),o=d,s=n||h;r!==s&&(r.owner=s),h=r;try{d=null,t=null===l?e():e(l)}finally{d=o,h=r.owner}return C(r),null!==l&&y(r,null,void 0,!0)&&(r=null),t}class t{constructor(e){this.value=e,this.pending=o,this.log=null}current(){return null!==d&&function(e){null===e.log&&(e.log={node1:null,node1slot:0,nodes:null,nodeslots:null});!function(e){let n,t=d,l=null===t.source1?-1:null===t.sources?0:t.sources.length;null===e.node1?(e.node1=t,e.node1slot=l,n=-1):null===e.nodes?(e.nodes=[t],e.nodeslots=[l],n=0):(n=e.nodes.length,e.nodes.push(t),e.nodeslots.push(l));null===t.source1?(t.source1=e,t.source1slot=n):null===t.sources?(t.sources=[e],t.sourceslots=[n]):(t.sources.push(e),t.sourceslots.push(n))}(e.log)}(this),this.value}next(e){if(null!==a)if(this.pending!==o){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,c.changes.add(this);else null!==this.log?(this.pending=e,c.changes.add(this),m()):this.value=e;return e}}function l(){return{fn:null,age:-1,state:s,source1:null,source1slot:0,sources:null,sourceslots:null,owner:null,owned:null,value:void 0,context:void 0,cleanups:null,afters:null}}class r{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){let n=this.items;for(let t=0;t<this.count;t++)e(n[t]),n[t]=null;this.count=0}}let o={},s=0,i=1,u=2,f=l(),c={time:0,changes:new r,updates:new r,disposes:new r},a=null,d=null,h=null,g=null;function p(){let e=g;return null===e?e=l():g=null,e}function y(e,n,t,l){let r,o=l||null===h||h===f?null:h,s=!e.noRecycle&&null===e.source1&&(null===e.owned&&null===e.cleanups||null!==o);if(s){if(g=e,e.owner=null,null!==o){if(null!==e.owned){if(null===o.owned)o.owned=e.owned;else for(r=0;r<e.owned.length;r++)o.owned.push(e.owned[r]);e.owned=null}if(null!==e.cleanups){if(null===o.cleanups)o.cleanups=e.cleanups;else for(r=0;r<e.cleanups.length;r++)o.cleanups.push(e.cleanups[r]);e.cleanups=null}}}else e.fn=n,e.value=t,e.age=c.time,null!==o&&(null===o.owned?o.owned=[e]:o.owned.push(e));return s}function m(){let e=h;c.updates.reset(),c.time++;try{w(c)}finally{a=d=null,h=e}}function w(e){let n=a,t=0;for(a=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(t>0&&e.time++,e.changes.run(v),e.updates.run(A),e.disposes.run(k),t++>1e5)throw new Error("Runaway clock detected");a=n}function v(e){e.value=e.pending,e.pending=o,e.log&&function(e){let n=e.node1,t=e.nodes;null!==n&&b(n);if(null!==t)for(let e=0,n=t.length;e<n;e++)b(t[e])}(e.log)}function b(e){let n=c.time;e.age<n&&(e.age=n,e.state=i,c.updates.add(e),null!==e.owned&&function e(n){for(let t=0;t<n.length;t++){let l=n[t];l.age=c.time,l.state=s,null!==l.owned&&e(l.owned)}}(e.owned))}function A(e){if(e.state===i){let n=h,t=d;h=d=e,e.state=u,x(e,!1),e.value=e.fn(e.value),e.state=s,C(e),h=n,d=t}}function C(e){let n=e.afters;null!==n&&(Promise.resolve().then(()=>{for(let e=0;e<n.length;e++)n[e]()}),e.afters=null)}function x(e,n){let t,l,r=e.source1,o=e.sources,s=e.sourceslots,i=e.cleanups,u=e.owned;if(null!==i){for(t=0;t<i.length;t++)i[t](n);e.cleanups=null}if(null!==u){for(t=0;t<u.length;t++)k(u[t]);e.owned=null}if(null!==r&&(N(r,e.source1slot),e.source1=null),null!==o)for(t=0,l=o.length;t<l;t++)N(o.pop(),s.pop())}function N(e,n){let t,l,r=e.nodes,o=e.nodeslots;-1===n?e.node1=null:(t=r.pop(),l=o.pop(),n!==r.length&&(r[n]=t,o[n]=l,-1===l?t.source1slot=n:t.sourceslots[l]=n))}function k(e){e.fn=null,e.owner=null,e.afters=null,x(e,!0)}const j=Symbol("solid-node"),O=Symbol("solid-proxy");function S(e){return e[O]||(e[O]=new Proxy(e,B))}function T(e){return null!==e&&"object"==typeof e&&(e.__proto__===Object.prototype||Array.isArray(e))}function M(e){let n,t,l;if(n=null!=e&&e._state)return n;if(!T(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let n=0,r=e.length;n<r;n++)(t=M(l=e[n]))!==l&&(e[n]=t)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let n=Object.keys(e);for(let r=0,o=n.length;r<o;r++)(t=M(l=e[n[r]]))!==l&&(e[n[r]]=t)}return e}function _(e){let n=e[j];return n||(e[j]=n={}),n}const B={get(e,n){if("_state"===n)return e;if(n===O||n===j)return;const l=e[n],r=T(l);if(null!==d&&"function"!=typeof l){let o,s;r&&(o=_(l))&&(s=o._||(o._=new t)).current(),(s=(o=_(e))[n]||(o[n]=new t)).current()}return r?S(l):l},set:()=>!0,deleteProperty:()=>!0};function E(e,n,t){if(t=M(t),e[n]===t)return;const l=Array.isArray(e)||!(n in e);void 0===t?delete e[n]:e[n]=t;let r,o=_(e);(r=o[n])&&r.next(),l&&(r=o._)&&r.next()}function P(e,n){const t=Object.keys(n);for(let l=0;l<t.length;l+=1){const r=t[l];E(e,r,n[r])}}function F(e,n,t=[]){if(1===n.length){let l=n[0];if("function"==typeof l&&void 0===(l=l(S(e),t)))return;return void P(e,l)}const l=n.shift(),r=typeof l,o=Array.isArray(e);if(Array.isArray(l))for(let r=0;r<l.length;r++)F(e,[l[r]].concat(n),t.concat([l[r]]));else if(o&&"function"===r)for(let r=0;r<e.length;r++)l(e[r],r)&&F(e,[r].concat(n),t.concat([r]));else if(o&&"object"===r){const{from:r=0,to:o=e.length-1,by:s=1}=l;for(let l=r;l<=o;l+=s)F(e,[l].concat(n),t.concat([l]))}else if(1===n.length){let r=n[0];if("function"==typeof r){const n=e[l];r=r(T(n)?S(n):n,t.concat([l]))}T(e[l])&&T(r)&&!Array.isArray(r)?P(e[l],r):E(e,l,r)}else F(e[l],n,t.concat([l]))}function H(e){return[S(e=M(e||{})),function(...n){!function(e){let n=void 0;if(null!==a)n=e();else{(a=c).changes.reset();try{n=e(),m()}finally{a=null}}}(()=>{if(Array.isArray(n[0]))for(let t=0;t<n.length;t+=1)F(e,n[t]);else F(e,n)})}]}function L(e,n,t,l,r){let o=n[t];if(e===o)return;if(!T(e)||null==o)return void(e!==o&&E(n,t,e));if(Array.isArray(e)){if(e.length&&o.length&&(!l||r&&null!=e[0][r])){let n,t,s,i,u,f,c,a,d=new Array(e.length),h=new Map;for(s=0,i=Math.min(o.length,e.length);s<i&&(o[s]===e[s]||r&&o[s][r]===e[s][r]);s++)L(e[s],o,s,l,r);for(i=o.length-1,u=e.length-1;i>=0&&u>=0&&(o[i]===e[u]||r&&o[i][r]===e[u][r]);i--,u--)d[u]=o[i];for(c=new Array(u+1),t=u;t>=s;t--)f=e[t],a=r?f[r]:f,n=h.get(a),c[t]=void 0===n?-1:n,h.set(a,t);for(n=s;n<=i;n++)f=o[n],a=r?f[r]:f,void 0!==(t=h.get(a))&&-1!==t&&(d[t]=o[n],t=c[t],h.set(a,t));for(t=s;t<e.length;t++)d.hasOwnProperty(t)?(E(o,t,d[t]),L(e[t],o,t,l,r)):E(o,t,e[t])}else for(let n=0,t=e.length;n<t;n++)L(e[n],o,n,l,r);return void(o.length>e.length&&E(o,"length",e.length))}const s=Object.keys(e);for(let n=0,t=s.length;n<t;n++)L(e[s[n]],o,s[n],l,r);const i=Object.keys(o);for(let n=0,t=i.length;n<t;n++)void 0===e[i[n]]&&E(o,i[n],void 0)}const R=Symbol("fallback");function q(e,t){return l=>{let r=[],o=[],s=[],i=0;return function(e){null===h?console.warn("cleanups created without a root or parent will never be run"):null===h.cleanups?h.cleanups=[e]:h.cleanups.push(e)}(()=>{for(let e=0,n=s.length;e<n;e++)s[e]()}),()=>{let u,f,c=l();return function(e){let n,t=d;return d=null,n=e(),d=t,n}(()=>{let e,l,d,h,g,p,y,m,w=c.length;if(0===w){if(0!==i){for(u=0;u<i;u++)s[u]();s=[],r=[],o=[],i=0}t&&(r=[R],o[0]=n(e=>(s[0]=e,t())),i=1)}else if(0===i){for(f=0;f<w;f++)r[f]=c[f],o[f]=n(a);i=w}else{for(e=new Map,d=new Array(w),h=new Array(w),g=0,p=Math.min(i,w);g<p&&r[g]===c[g];g++);for(p=i-1,y=w-1;p>=0&&y>=0&&r[p]===c[y];p--,y--)d[y]=o[p],h[y]=s[p];for(l=new Array(y+1),f=y;f>=g;f--)m=c[f],u=e.get(m),l[f]=void 0===u?-1:u,e.set(m,f);for(u=g;u<=p;u++)m=r[u],void 0!==(f=e.get(m))&&-1!==f?(d[f]=o[u],h[f]=s[u],f=l[f],e.set(m,f)):s[u]();for(f=g;f<w;f++)d.hasOwnProperty(f)?(o[f]=d[f],s[f]=h[f]):o[f]=n(a);i=o.length=w,r=c.slice(0)}return o});function a(n){return s[f]=n,e(c[f],f)}}}}function z(e){const n=document.createElement("template");if(n.innerHTML=e,n.innerHTML!==e)throw new Error(`Template html does not match input:\n${n.innerHTML}\n${e}`);return n}function Q(e,n,t){if(t)for(let e=0;e<t.length;e++)$(n,t[e]);return e(n)}function V(n,t,l,r){if(void 0===l||r||(r=[]),"function"==typeof t)e((e=r)=>G(n,t(),e,l));else{if(!Array.isArray(t)||!function e(n){for(let t=0,l=n.length;t<l;t++){const l=n[t];if(Array.isArray(l)&&e(l)||"function"==typeof l)return!0}return!1}(t))return G(n,t,r,l);e((e=r)=>G(n,t,e,l))}}function $(e,n){const t=e[n];Object.defineProperty(e,n,{get:()=>t(),enumerable:!0})}function D(e,n,t){for(let l=0,r=n.length;l<r;l++)e.insertBefore(n[l],t)}function I(e,n,t,l){if(void 0===t)return e.textContent="";const r=l||document.createTextNode("");if(n.length){r!==n[0]&&e.replaceChild(r,n[0]);for(let t=n.length-1;t>0;t--)e.removeChild(n[t])}else e.insertBefore(r,t);return[r]}function G(n,t,l,r){if(t===l)return l;const o=typeof t,s=void 0!==r;if(n=s&&l[0]&&l[0].parentNode||n,"string"===o||"number"===o)if("number"===o&&(t=t.toString()),s){let e=l[0];e&&3===e.nodeType?e.data=t:e=document.createTextNode(t),l=I(n,l,r,e)}else l=""!==l&&"string"==typeof l?n.firstChild.data=t:n.textContent=t;else if(null==t||"boolean"===o)l=I(n,l,r);else if("function"===o)e(()=>l=G(n,t(),l,r));else if(Array.isArray(t)){const e=function e(n,t){for(let l=0,r=t.length;l<r;l++){let r,o=t[l];if(o instanceof Node)n.push(o);else if(null==o||!0===o||!1===o);else if(Array.isArray(o))e(n,o);else if("string"==(r=typeof o))n.push(document.createTextNode(o));else if("function"===r){const t=o();e(n,Array.isArray(t)?t:[t])}else n.push(document.createTextNode(o.toString()))}return n}([],t);if(0===e.length){if(l=I(n,l,r),s)return l}else Array.isArray(l)?0===l.length?D(n,e,r):K(n,l,e):null==l||""===l?D(n,e):K(n,s&&l||[n.firstChild],e);l=e}else if(t instanceof Node){if(Array.isArray(l)){if(s)return l=I(n,l,r,t);I(n,l,null,t)}else null==l||""===l?n.appendChild(t):n.replaceChild(t,n.firstChild);l=t}return l}var J=-1;function K(e,n,t){var l,r=t.length,o=0,s=n.length-1,i=0,u=r-1,f=n[o],c=t[i],a=n[s],d=t[u],h=a.nextSibling,g=!0;e:for(;g;){for(g=!1;c===f;){if(o++,++i>u||o>s)break e;c=t[i],f=n[o]}for(;d===a;){if(h=a,s--,i>--u||o>s)break e;d=t[u],a=n[s]}for(;c===a;){if(g=!0,e.insertBefore(a,f),s--,++i>u||o>s)break e;c=t[i],a=n[s]}for(;d===f;){if(g=!0,null===h?e.appendChild(f):e.insertBefore(f,h),h=f,o++,i>--u||o>s)break e;d=t[u],f=n[o]}}if(i>u){for(;o<=s;)e.removeChild(n[s]),s--;return}if(o>s){for(;i<=u;)e.insertBefore(t[i],h),i++;return}const p=new Array(u-i+1);for(let e=i;e<=u;e++)p[e]=J;const y=new Map;for(let e=i;e<=u;e++)y.set(t[e],e);let m=i+t.length-1-u,w=[];for(let e=o;e<=s;e++)y.has(n[e])?(p[y.get(n[e])]=e,m++):w.push(e);if(0!==m){var v,b=function(e,n){let t=[],l=[],r=-1,o=new Array(e.length);for(let s=n,i=e.length;s<i;s++){let n=e[s];if(n<0)continue;let i=U(t,n);-1!==i&&(o[s]=l[i]),i===r?(t[++r]=n,l[r]=s):n<t[i+1]&&(t[i+1]=n,l[i+1]=s)}for(let e=l[r];r>=0;e=o[e],r--)t[r]=e;return t}(p,i),A=[],C=n[o],x=b.length-1;for(let e=o;e<=s;e++)A[e]=C,C=C.nextSibling;for(let n=0;n<w.length;n++)e.removeChild(A[w[n]]);for(let n=u;n>=i;n--)b[x]===n?(h=A[p[b[x]]],x--):(v=p[n]===J?t[n]:A[p[n]],e.insertBefore(v,h),h=v)}else{if(f!==e.firstChild||a!==e.lastChild){for(l=o;l<=s;l++)e.removeChild(n[l]);for(;i<=u;)e.insertBefore(t[i],h),i++;return}for(e.textContent="";i<=u;)e.appendChild(t[i]),i++}}function U(e,n){var t=-1,l=e.length;if(l>0&&e[l-1]<=n)return l-1;for(;l-t>1;){var r=Math.floor((t+l)/2);e[r]>n?l=r:t=r}return t}function W(e){const n=q(e.children,"fallback"in e?()=>e.fallback:void 0)(()=>e.each);return e.transform?e.transform(n):n}const X=z('<table class="table table-striped latest-data"><tbody></tbody></table>'),Y=z('<tr><td class="dbname"></td><td class="query-count"><span></span></td></tr>'),Z=z('<td><div class="popover left"><div class="popover-content"></div><div class="arrow"></div></div></td>');!function(e,t){let l;n(n=>{l=n,V(t,e())})}(()=>{const[n,t]=H({databases:[]}),l=()=>{Monitoring.renderRate.ping();const e=ENV.generateData().toArray();Promise.resolve(e).then(e=>t(function(e,n={}){let t;Array.isArray(e)?t=e.pop():"object"==typeof e?(t=e,e=void 0):(e=Array.prototype.slice.call(arguments,0,-1),t=arguments[arguments.length-1],n={});const{merge:l,key:r="id"}=n;return n=>{if(n=M(n),e){for(let t=0;t<e.length-1;t+=1)n=n[e[t]];L(t,n,e[e.length-1],l,r)}else L(t,{state:n},"state",l,r)}}(["databases",e],{merge:!0,key:null}))),setTimeout(l,ENV.timeout)};return setTimeout(l,0),function(){const t=X.content.firstChild.cloneNode(!0);return V(t.firstChild,Q(W,{each:()=>n.databases,children:n=>(function(){const t=Y.content.firstChild.cloneNode(!0),l=t.firstChild,r=l.nextSibling.firstChild;return l.textContent=n.dbname,e(()=>r.className=n.lastSample.countClassName),V(r,()=>n.lastSample.nbQueries),V(t,Q(W,{each:()=>n.lastSample.topFiveQueries,children:n=>(function(){const t=Z.content.firstChild.cloneNode(!0),l=t.firstChild,r=l.firstChild;return e(()=>t.className=n.elapsedClassName),V(t,()=>n.formatElapsed,l),V(r,()=>n.query),t})()},["each"]),null),t})()},["each"])),t}()},document.getElementById("dbmon"))}();

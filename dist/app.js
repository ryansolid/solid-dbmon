!function(){"use strict";function e(e,t){l(e,t)}function t(e,t){t&&(u=t);let n=u,o=i,c=0===e.length?a:l(null,null),f=void 0,d=function(){null!==s?r.disposes.add(c):T(c)};u=c,i=null;try{f=e(d)}finally{i=o,u=n}return f}class n{constructor(e){this.value=e,this.pending=f,this.log=null}current(){return null!==i&&(null===this.log&&(this.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),d(this.log)),this.value}next(e){if(null!==s)if(this.pending!==f){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,r.changes.add(this);else null!==this.log?(this.pending=e,r.changes.add(this),p()):this.value=e;return e}}function l(e,t){const n={fn:e,value:t,age:r.time,state:0,comparator:null,source1:null,source1slot:0,sources:null,sourceslots:null,dependents:null,dependentslot:0,dependentcount:0,owner:u,owned:null,log:null,context:null,cleanups:null};if(null===e)return n;let l=u,o=i;return null===l&&console.warn("computations created without a root or parent will never be disposed"),u=i=n,null===s?function(e){s=r,r.changes.reset(),r.updates.reset();try{e.value=e.fn(e.value),(r.changes.count>0||r.updates.count>0)&&(r.time++,g(r))}finally{s=u=i=null}}(n):n.value=n.fn(n.value),l&&l!==a&&(null===l.owned?l.owned=[n]:l.owned.push(n)),u=l,i=o,n}class o{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){let t=this.items;for(let n=0;n<this.count;n++)e(t[n]),t[n]=null;this.count=0}}let r={time:0,changes:new o,updates:new o,disposes:new o},s=null,i=null,u=null,c=null,f={},a=l(null,null);function d(e){let t,n=i,l=null===n.source1?-1:null===n.sources?0:n.sources.length;if(null===e.node1)e.node1=n,e.node1slot=l,t=-1;else if(null===e.nodes){if(e.node1===n)return;e.nodes=[n],e.nodeslots=[l],t=0}else{if(t=e.nodes.length,e.nodes[t-1]===n)return;e.nodes.push(n),e.nodeslots.push(l)}null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}function h(e){0!=(6&e.state)&&function(e){if(0!=(4&e.state)){const t=e.owner;0!=(7&t.state)&&h(t),e.state&=-5}if(0!=(2&e.state)){const t=e.dependents;for(let n=e.dependentslot,l=e.dependentcount;n<l;n++){const e=t[n];null!=e&&h(e),t[n]=null}e.state&=-3}}(e),0!=(1&e.state)&&m(e),S(e,31)}function p(){let e=u;r.updates.reset(),r.time++;try{g(r)}finally{s=i=null,u=e}}function g(e){let t=s,n=0;for(s=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(n>0&&e.time++,e.changes.run(y),e.updates.run(m),e.disposes.run(T),n++>1e5)throw new Error("Runaway clock detected");s=t}function y(e){e.value=e.pending,e.pending=f,e.log&&N(e.log,b)}function m(e){const t=e.state;if(0==(16&t))if(0!=(2&t))e.dependents[e.dependentslot++]=null,e.dependentslot===e.dependentcount&&S(e,14);else if(0!=(1&t))if(0!=(4&t))h(e);else if(e.comparator){const t=v(e);(0,e.comparator)(t,e.value)||x(e,!1,!0)}else v(e)}function v(e){const t=e.value,n=u,l=i;return u=i=e,e.state=8,k(e,!1),e.value=e.fn(e.value),S(e,31),u=n,i=l,t}function b(e){const t=r.time;e.age<t&&(e.state|=1,e.age=t,C(e,!!e.comparator))}function w(e){const t=r.time;if(e.age<t){e.state|=2,(e.dependents||(e.dependents=[]))[e.dependentcount++]=c,C(e,!0)}}function A(e){if(0!=(2&e.state)){e.state=1;const t=r.time;e.age<t&&(e.age=t,e.comparator||x(e,!1,!0))}}function C(e,t){if(r.updates.add(e),e.comparator){const t=c;c=e,x(e,!0,!1),c=t}else x(e,t,!1)}function x(e,t,n){const l=e.owned;if(null!==l){!function e(t,n,l){for(let o=0,r=t.length;o<r;o++){const r=t[o];if(null!==r){n?0==(16&r.state)&&(r.state|=4):(r.age=l,r.state=16);const t=r.owned;null!==t&&e(t,n,l)}}}(l,t&&!n,r.time)}const o=e.log;null!==o&&N(o,n?A:t?w:b)}function N(e,t){const n=e.node1,l=e.nodes;if(null!==n&&t(n),null!==l)for(let e=0,n=l.length;e<n;e++)t(l[e])}function k(e,t){let n,l,o=e.source1,r=e.sources,s=e.sourceslots,i=e.cleanups,u=e.owned;if(null!==i){for(n=0;n<i.length;n++)i[n](t);e.cleanups=null}if(null!==u){for(n=0;n<u.length;n++)T(u[n]);e.owned=null}if(null!==o&&(j(o,e.source1slot),e.source1=null),null!==r)for(n=0,l=r.length;n<l;n++)j(r.pop(),s.pop())}function j(e,t){let n,l,o=e.nodes,r=e.nodeslots;-1===t?e.node1=null:(n=o.pop(),l=r.pop(),t!==o.length&&(o[t]=n,r[t]=l,-1===l?n.source1slot=t:n.sourceslots[l]=t))}function S(e,t){e.state&=~t,e.dependentslot=0,e.dependentcount=0}function T(e){e.fn=null,e.log=null,e.dependents=null,k(e,!0),S(e,31)}const M=Symbol("solid-node"),O=Symbol("solid-proxy");function E(e){return e[O]||(e[O]=new Proxy(e,q))}function _(e){return null!=e&&"object"==typeof e&&(e.__proto__===Object.prototype||Array.isArray(e))}function B(e){let t,n,l;if(t=null!=e&&e._state)return t;if(!_(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let t=0,o=e.length;t<o;t++)(n=B(l=e[t]))!==l&&(e[t]=n)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let t=Object.keys(e);for(let o=0,r=t.length;o<r;o++)(n=B(l=e[t[o]]))!==l&&(e[t[o]]=n)}return e}function P(e){let t=e[M];return t||(e[M]=t={}),t}const q={get(e,t){if("_state"===t)return e;if(t===O||t===M)return;const l=e[t],o=_(l);if(null!==i&&("function"!=typeof l||e.hasOwnProperty(t))){let r,s;o&&(r=P(l))&&(s=r._||(r._=new n)).current(),(s=(r=P(e))[t]||(r[t]=new n)).current()}return o?E(l):l},set:()=>!0,deleteProperty:()=>!0};function F(e,t,n,l){let o=B(n);if(!l&&e[t]===o)return;const r=Array.isArray(e)||!(t in e);void 0===o?delete e[t]:e[t]=o;let s,i=P(e);(s=i[t])&&s.next(),r&&(s=i._)&&s.next()}function H(e,t,n){const l=Object.keys(t);for(let o=0;o<l.length;o+=1){const r=l[o];F(e,r,t[r],n)}}function L(e,t,n=[],l){if(1===t.length){let o=t[0];if("function"==typeof o&&void 0===(o=o(E(e),n)))return;return void H(e,o,l)}const o=t.shift(),r=typeof o,s=Array.isArray(e);if(Array.isArray(o))for(let r=0;r<o.length;r++)L(e,[o[r]].concat(t),n.concat([o[r]]),l);else if(s&&"function"===r)for(let r=0;r<e.length;r++)o(e[r],r)&&L(e,[r].concat(t),n.concat([r]),l);else if(s&&"object"===r){const{from:r=0,to:s=e.length-1,by:i=1}=o;for(let o=r;o<=s;o+=i)L(e,[o].concat(t),n.concat([o]),l)}else if(1===t.length){let r=t[0];if("function"==typeof r){const t=e[o];r=r(_(t)?E(t):t,n.concat([o]))}_(e[o])&&_(r)&&!Array.isArray(r)?H(e[o],r,l):F(e,o,r,l)}else L(e[o],t,n.concat([o]),l)}function Q(e){const t=B(e||{});return[E(t),function(...e){!function(e){let t=void 0;if(null!==s)t=e();else{(s=r).changes.reset();try{t=e(),p()}finally{s=null}}}(()=>{if(Array.isArray(e[0]))for(let n=0;n<e.length;n+=1)L(t,e[n]);else L(t,e)})}]}function z(e,t,n,l,o){let r=t[n];if(e===r)return;if(!_(e)||!_(r)||o&&e[o]!==r[o])return void(e!==r&&F(t,n,e));if(Array.isArray(e)){if(e.length&&r.length&&(!l||o&&null!=e[0][o])){let t,n,s,i,u,c,f,a;for(s=0,i=Math.min(r.length,e.length);s<i&&(r[s]===e[s]||o&&r[s][o]===e[s][o]);s++)z(e[s],r,s,l,o);const d=new Array(e.length),h=new Map;for(i=r.length-1,u=e.length-1;i>=s&&u>=s&&(r[i]===e[u]||o&&r[i][o]===e[u][o]);i--,u--)d[u]=r[i];if(s>u||s>i){for(n=s;n<=u;n++)F(r,n,e[n]);for(;n<e.length;n++)F(r,n,d[n]),z(e[n],r,n,l,o);return void(r.length>e.length&&F(r,"length",e.length))}for(f=new Array(u+1),n=u;n>=s;n--)c=e[n],a=o?c[o]:c,t=h.get(a),f[n]=void 0===t?-1:t,h.set(a,n);for(t=s;t<=i;t++)c=r[t],a=o?c[o]:c,void 0!==(n=h.get(a))&&-1!==n&&(d[n]=r[t],n=f[n],h.set(a,n));for(n=s;n<e.length;n++)n in d?(F(r,n,d[n]),z(e[n],r,n,l,o)):F(r,n,e[n])}else for(let t=0,n=e.length;t<n;t++)z(e[t],r,t,l,o);return void(r.length>e.length&&F(r,"length",e.length))}const s=Object.keys(e);for(let t=0,n=s.length;t<n;t++)z(e[s[t]],r,s[t],l,o);const i=Object.keys(r);for(let t=0,n=i.length;t<n;t++)void 0===e[i[t]]&&F(r,i[t],void 0)}const R=Symbol("fallback");function V(e,n){return l=>{let o=[],r=[],s=[],c=0;return function(e){null===u?console.warn("cleanups created without a root or parent will never be run"):null===u.cleanups?u.cleanups=[e]:u.cleanups.push(e)}(()=>{for(let e=0,t=s.length;e<t;e++)s[e]()}),()=>{let u,f,a=l()||[];return function(e){let t,n=i;return i=null,t=e(),i=n,t}(()=>{let e,l,i,h,p,g,y,m,v=a.length;if(0===v){if(0!==c){for(u=0;u<c;u++)s[u]();s=[],o=[],r=[],c=0}n&&(o=[R],r[0]=t(e=>(s[0]=e,n())),c=1)}else if(0===c){for(f=0;f<v;f++)o[f]=a[f],r[f]=t(d);c=v}else{for(i=new Array(v),h=new Array(v),p=0,g=Math.min(c,v);p<g&&o[p]===a[p];p++);for(g=c-1,y=v-1;g>=p&&y>=p&&o[g]===a[y];g--,y--)i[y]=r[g],h[y]=s[g];if(p>y){for(f=g;p<=f;f--)s[f]();const e=g-p+1;return e>0&&(r.splice(p,e),s.splice(p,e)),o=a.slice(0),c=v,r}if(p>g){for(f=p;f<=y;f++)r[f]=t(d);for(;f<v;f++)r[f]=i[f],s[f]=h[f];return o=a.slice(0),c=v,r}for(e=new Map,l=new Array(y+1),f=y;f>=p;f--)m=a[f],u=e.get(m),l[f]=void 0===u?-1:u,e.set(m,f);for(u=p;u<=g;u++)m=o[u],void 0!==(f=e.get(m))&&-1!==f?(i[f]=r[u],h[f]=s[u],f=l[f],e.set(m,f)):s[u]();for(f=p;f<v;f++)f in i?(r[f]=i[f],s[f]=h[f]):r[f]=t(d);c=r.length=v,o=a.slice(0)}return r});function d(t){return s[f]=t,e(a[f],f)}}}}function $(e,t){const n=document.createElement("template");if(n.innerHTML=e,n.innerHTML!==e)throw new Error(`Template html does not match input:\n${n.innerHTML}\n${e}`);let l=n.content.firstChild;return t&&(l=l.firstChild),l}function D(e,t,n){if(n)for(let e=0;e<n.length;e++)G(t,n[e]);return e(t)}function I(t,n,l,o){if(void 0===l||o||(o=[]),"function"==typeof n)e((e=o)=>U(t,n(),e,l));else{if(!Array.isArray(n)||!function e(t){for(let n=0,l=t.length;n<l;n++){const l=t[n];if(Array.isArray(l)&&e(l)||"function"==typeof l)return!0}return!1}(n))return U(t,n,o,l);e((e=o)=>U(t,n,e,l))}}function G(e,t){const n=e[t];Object.defineProperty(e,t,{get:()=>n(),enumerable:!0})}function J(e,t,n){for(let l=0,o=t.length;l<o;l++)e.insertBefore(t[l],n)}function K(e,t,n,l){if(void 0===n)return e.textContent="";const o=l||document.createTextNode("");if(t.length){o!==t[0]&&e.replaceChild(o,t[0]);for(let n=t.length-1;n>0;n--)e.removeChild(t[n])}else e.insertBefore(o,n);return[o]}function U(t,n,l,o){if(n===l)return l;const r=typeof n,s=void 0!==o;if(t=s&&l[0]&&l[0].parentNode||t,"string"===r||"number"===r)if("number"===r&&(n=n.toString()),s){let e=l[0];e&&3===e.nodeType?e.data=n:e=document.createTextNode(n),l=K(t,l,o,e)}else l=""!==l&&"string"==typeof l?t.firstChild.data=n:t.textContent=n;else if(null==n||"boolean"===r)l=K(t,l,o);else if("function"===r)e(()=>l=U(t,n(),l,o));else if(Array.isArray(n)){const e=function e(t,n){for(let l=0,o=n.length;l<o;l++){let o,r=n[l];if(r instanceof Node)t.push(r);else if(null==r||!0===r||!1===r);else if(Array.isArray(r))e(t,r);else if("string"==(o=typeof r))t.push(document.createTextNode(r));else if("function"===o){const n=r();e(t,Array.isArray(n)?n:[n])}else t.push(document.createTextNode(r.toString()))}return t}([],n);if(0===e.length){if(l=K(t,l,o),s)return l}else Array.isArray(l)?0===l.length?J(t,e,o):X(t,l,e):null==l||""===l?J(t,e):X(t,s&&l||[t.firstChild],e);l=e}else if(n instanceof Node){if(Array.isArray(l)){if(s)return l=K(t,l,o,n);K(t,l,null,n)}else null==l||""===l?t.appendChild(n):t.replaceChild(n,t.firstChild);l=n}return l}var W=-1;function X(e,t,n){var l,o=n.length,r=0,s=t.length-1,i=0,u=o-1,c=t[r],f=n[i],a=t[s],d=n[u],h=a.nextSibling,p=!0;e:for(;p;){for(p=!1;f===c;){if(r++,++i>u||r>s)break e;f=n[i],c=t[r]}for(;d===a;){if(h=a,s--,i>--u||r>s)break e;d=n[u],a=t[s]}for(;f===a;){if(p=!0,e.insertBefore(a,c),s--,++i>u||r>s)break e;f=n[i],a=t[s]}for(;d===c;){if(p=!0,null===h?e.appendChild(c):e.insertBefore(c,h),h=c,r++,i>--u||r>s)break e;d=n[u],c=t[r]}}if(i>u){for(;r<=s;)e.removeChild(t[s]),s--;return}if(r>s){for(;i<=u;)e.insertBefore(n[i],h),i++;return}const g=new Array(u-i+1),y=new Map;for(let e=i;e<=u;e++)g[e]=W,y.set(n[e],e);let m=i+n.length-1-u,v=[];for(let e=r;e<=s;e++)y.has(t[e])?(g[y.get(t[e])]=e,m++):v.push(e);if(0!==m){var b,w=function(e,t){let n=[],l=[],o=-1,r=new Array(e.length);for(let s=t,i=e.length;s<i;s++){let t=e[s];if(t<0)continue;let i=Y(n,t);-1!==i&&(r[s]=l[i]),i===o?(n[++o]=t,l[o]=s):t<n[i+1]&&(n[i+1]=t,l[i+1]=s)}for(let e=l[o];o>=0;e=r[e],o--)n[o]=e;return n}(g,i),A=[],C=t[r],x=w.length-1;for(let e=r;e<=s;e++)A[e]=C,C=C.nextSibling;for(let t=0;t<v.length;t++)e.removeChild(A[v[t]]);for(let t=u;t>=i;t--)w[x]===t?(h=A[g[w[x]]],x--):(b=g[t]===W?n[t]:A[g[t]],e.insertBefore(b,h),h=b)}else{if(c!==e.firstChild||a!==e.lastChild){for(l=r;l<=s;l++)e.removeChild(t[l]);for(;i<=u;)e.insertBefore(n[i],h),i++;return}for(e.textContent="";i<=u;)e.appendChild(n[i]),i++}}function Y(e,t){var n=-1,l=e.length;if(l>0&&e[l-1]<=t)return l-1;for(;l-n>1;){var o=Math.floor((n+l)/2);e[o]>t?l=o:n=o}return n}function Z(e){const t=(n=V(e.children,"fallback"in e?()=>e.fallback:void 0)(()=>e.each),(u=l(n,o)).comparator=s||null,()=>{if(null!==i){const e=u.state;if(0!=(7&e)&&h(u),u.age===r.time&&8===e)throw new Error("Circular dependency.");0==(16&e)&&(null===u.log&&(u.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),d(u.log))}return u.value});var n,o,s,u;return e.transform?e.transform(t,()=>e.each):t}const ee=$('<table class="table table-striped latest-data"><tbody></tbody></table>'),te=$('<tr><td class="dbname"></td><td class="query-count"><span></span></td></tr>'),ne=$('<td><div class="popover left"><div class="popover-content"></div><div class="arrow"></div></div></td>');!function(e,n){let l;t(t=>{l=t,I(n,e())})}(()=>{const[t,n]=Q({databases:[]}),l=()=>{Monitoring.renderRate.ping();const e=ENV.generateData().toArray();Promise.resolve(e).then(e=>n(function(e,t={}){let n;Array.isArray(e)?n=e.pop():"object"==typeof e?(n=e,e=void 0):(e=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],t={});const{merge:l,key:o="id"}=t;return t=>{if(t=B(t),e){for(let n=0;n<e.length-1;n+=1)t=t[e[n]];z(n,t,e[e.length-1],l,o)}else z(n,{state:t},"state",l,o)}}(["databases",e],{merge:!0,key:null}))),setTimeout(l,ENV.timeout)};return setTimeout(l,0),function(){const n=ee.cloneNode(!0);return I(n.firstChild,D(Z,{each:()=>t.databases,children:t=>{const n=t.dbName;return function(){const l=te.cloneNode(!0),o=l.firstChild,r=o.nextSibling.firstChild;o.textContent=n,r.textContent=t.lastSample.nbQueries;const s=r.firstChild;return I(l,D(Z,{each:()=>t.lastSample.topFiveQueries,children:t=>(function(){const n=ne.cloneNode(!0),l=n.firstChild,o=l.firstChild;I(n,()=>t.formatElapsed,l),o.textContent=t.query;const r=o.firstChild;return e(()=>{n.className=t.elapsedClassName,r.data=t.query}),n})()},["each"]),null),e(()=>{r.className=t.lastSample.countClassName,s.data=t.lastSample.nbQueries}),l}()}},["each"])),n}()},document.getElementById("dbmon"))}();

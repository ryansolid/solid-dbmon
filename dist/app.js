!function(){"use strict";let e=null;if(window&&window.MessageChannel){const t=new MessageChannel,n=t.port2;t.port1.onmessage=()=>{if(null!==e){const t=performance.now(),l=!0;try{e(l,t)?n.postMessage(null):e=null}catch(e){throw n.postMessage(null),e}}}}function t(e,t){t&&(a=t);let n=a,l=c,o=0===e.length?h:r(null,null),s=void 0,f=function(){null!==u?i.disposes.add(o):T(o)};a=o,c=null;try{s=e(f)}finally{c=l,a=n}return s}function n(e,t){r(e,t)}function l(e){let t,n=c;return c=null,t=e(),c=n,t}navigator&&navigator.scheduling&&navigator.scheduling.isInputPending;class o{constructor(e){this.value=e,this.pending=d,this.log=null}current(){return null!==c&&(null===this.log&&(this.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),p(this.log)),this.value}next(e){if(null!==u)if(this.pending!==d){if(e!==this.pending)throw new Error("conflicting changes: "+e+" !== "+this.pending)}else this.pending=e,i.changes.add(this);else null!==this.log?(this.pending=e,i.changes.add(this),y()):this.value=e;return e}}function r(e,t){const n={fn:e,value:t,age:i.time,state:0,comparator:null,source1:null,source1slot:0,sources:null,sourceslots:null,dependents:null,dependentslot:0,dependentcount:0,owner:a,owned:null,log:null,context:null,cleanups:null};if(null===e)return n;let l=a,o=c;return null===l&&console.warn("computations created without a root or parent will never be disposed"),a=c=n,null===u?function(e){u=i,i.changes.reset(),i.updates.reset();try{e.value=e.fn(e.value),(i.changes.count>0||i.updates.count>0)&&(i.time++,v(i))}finally{u=a=c=null}}(n):n.value=n.fn(n.value),l&&l!==h&&(null===l.owned?l.owned=[n]:l.owned.push(n)),a=l,c=o,n}class s{constructor(){this.items=[],this.count=0}reset(){this.count=0}add(e){this.items[this.count++]=e}run(e){let t=this.items;for(let n=0;n<this.count;n++)e(t[n]),t[n]=null;this.count=0}}let i={time:0,changes:new s,updates:new s,disposes:new s},u=null,c=null,a=null,f=null,d={},h=r(null,null);function p(e){let t,n=c,l=null===n.source1?-1:null===n.sources?0:n.sources.length;if(null===e.node1)e.node1=n,e.node1slot=l,t=-1;else if(null===e.nodes){if(e.node1===n)return;e.nodes=[n],e.nodeslots=[l],t=0}else{if(t=e.nodes.length,e.nodes[t-1]===n)return;e.nodes.push(n),e.nodeslots.push(l)}null===n.source1?(n.source1=e,n.source1slot=t):null===n.sources?(n.sources=[e],n.sourceslots=[t]):(n.sources.push(e),n.sourceslots.push(t))}function g(e){0!=(6&e.state)&&function(e){if(0!=(4&e.state)){const t=e.owner;0!=(7&t.state)&&g(t),e.state&=-5}if(0!=(2&e.state)){const t=e.dependents;for(let n=e.dependentslot,l=e.dependentcount;n<l;n++){const e=t[n];null!=e&&g(e),t[n]=null}e.state&=-3}}(e),0!=(1&e.state)&&w(e),j(e,31)}function y(){let e=a;i.updates.reset(),i.time++;try{v(i)}finally{u=c=null,a=e}}function v(e){let t=u,n=0;for(u=e,e.disposes.reset();0!==e.changes.count||0!==e.updates.count||0!==e.disposes.count;)if(n>0&&e.time++,e.changes.run(m),e.updates.run(w),e.disposes.run(T),n++>1e5)throw new Error("Runaway clock detected");u=t}function m(e){e.value=e.pending,e.pending=d,e.log&&N(e.log,A)}function w(e){const t=e.state;if(0==(16&t))if(0!=(2&t))e.dependents[e.dependentslot++]=null,e.dependentslot===e.dependentcount&&j(e,14);else if(0!=(1&t))if(0!=(4&t))g(e);else if(e.comparator){const t=b(e);(0,e.comparator)(t,e.value)||k(e,!1,!0)}else b(e)}function b(e){const t=e.value,n=a,l=c;return a=c=e,e.state=8,M(e,!1),e.value=e.fn(e.value),j(e,31),a=n,c=l,t}function A(e){const t=i.time;e.age<t&&(e.state|=1,e.age=t,_(e,!!e.comparator))}function C(e){const t=i.time;if(e.age<t){e.state|=2,(e.dependents||(e.dependents=[]))[e.dependentcount++]=f,_(e,!0)}}function x(e){if(0!=(2&e.state)){e.state=1;const t=i.time;e.age<t&&(e.age=t,e.comparator||k(e,!1,!0))}}function _(e,t){if(i.updates.add(e),e.comparator){const t=f;f=e,k(e,!0,!1),f=t}else k(e,t,!1)}function k(e,t,n){const l=e.owned;if(null!==l){!function e(t,n,l){for(let o=0,r=t.length;o<r;o++){const r=t[o];if(null!==r){n?0==(16&r.state)&&(r.state|=4):(r.age=l,r.state=16);const t=r.owned;null!==t&&e(t,n,l)}}}(l,t&&!n,i.time)}const o=e.log;null!==o&&N(o,n?x:t?C:A)}function N(e,t){const n=e.node1,l=e.nodes;if(null!==n&&t(n),null!==l)for(let e=0,n=l.length;e<n;e++)t(l[e])}function M(e,t){let n,l,o=e.source1,r=e.sources,s=e.sourceslots,i=e.cleanups,u=e.owned;if(null!==i){for(n=0;n<i.length;n++)i[n](t);e.cleanups=null}if(null!==u){for(n=0;n<u.length;n++)T(u[n]);e.owned=null}if(null!==o&&(S(o,e.source1slot),e.source1=null),null!==r)for(n=0,l=r.length;n<l;n++)S(r.pop(),s.pop())}function S(e,t){let n,l,o=e.nodes,r=e.nodeslots;-1===t?e.node1=null:(n=o.pop(),l=r.pop(),t!==o.length&&(o[t]=n,r[t]=l,-1===l?n.source1slot=t:n.sourceslots[l]=t))}function j(e,t){e.state&=~t,e.dependentslot=0,e.dependentcount=0}function T(e){e.fn=null,e.log=null,e.dependents=null,M(e,!0),j(e,31)}const O=Symbol("state-node"),$=Symbol("state-proxy");function E(e){return e[$]||(e[$]=new Proxy(e,F))}function P(e){return null!=e&&"object"==typeof e&&(e.__proto__===Object.prototype||Array.isArray(e))}function B(e){let t,n,l;if(t=null!=e&&e._state)return t;if(!P(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let t=0,o=e.length;t<o;t++)l=e[t],(n=B(l))!==l&&(e[t]=n)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let t=Object.keys(e);for(let o=0,r=t.length;o<r;o++)l=e[t[o]],(n=B(l))!==l&&(e[t[o]]=n)}return e}function q(e){let t=e[O];return t||(e[O]=t={}),t}const F={get(e,t){if("_state"===t)return e;if(t===$||t===O)return;const n=e[t],l=P(n);if(null!==c&&("function"!=typeof n||e.hasOwnProperty(t))){let r,s;l&&(r=q(n))&&(s=r._||(r._=new o),s.current()),r=q(e),s=r[t]||(r[t]=new o),s.current()}return l?E(n):n},set:()=>!0,deleteProperty:()=>!0},H={get(e,t){if("_state"===t)return e;const n=e[t];return P(n)?new Proxy(n,H):n},set:(e,t,n)=>(L(e,t,B(n)),!0),deleteProperty:(e,t)=>(L(e,t,void 0),!0)};function L(e,t,n,l){if(!l&&e[t]===n)return;const o=Array.isArray(e)||!(t in e);void 0===n?delete e[t]:e[t]=n;let r,s=q(e);(r=s[t])&&r.next(),o&&(r=s._)&&r.next()}function Q(e,t,n=[]){let l,o=e;if(t.length>1){l=t.shift();const r=typeof l,s=Array.isArray(e);if(Array.isArray(l)){for(let o=0;o<l.length;o++)Q(e,[l[o]].concat(t),n.concat([l[o]]));return}if(s&&"function"===r){for(let o=0;o<e.length;o++)l(e[o],o)&&Q(e,[o].concat(t),n.concat([o]));return}if(s&&"object"===r){const{from:o=0,to:r=e.length-1,by:s=1}=l;for(let l=o;l<=r;l+=s)Q(e,[l].concat(t),n.concat([l]));return}if(t.length>1)return void Q(e[l],t,n.concat([l]));o=e[l],n=n.concat([l])}let r=t[0];if("function"==typeof r){const e=void 0===l||P(o)?new Proxy(o,H):o;if(r=r(e,n),r===e||void 0===r)return}r=B(r),void 0===l||P(o)&&P(r)&&!Array.isArray(r)?function(e,t,n){const l=Object.keys(t);for(let o=0;o<l.length;o+=1){const r=l[o];L(e,r,t[r],n)}}(o,r):L(e,l,r)}function z(e){const t=B(e||{});return[E(t),function(...e){!function(e){let t=void 0;if(null!==u)t=e();else{u=i,u.changes.reset();try{t=e(),y()}finally{u=null}}}(()=>Q(t,e))}]}function I(e,t={}){const{merge:n,key:l="id"}=t;return t=>{if(!P(t=B(t)))return e;!function e(t,n,l,o,r){let s=n[l];if(t===s)return;if(!P(t)||!P(s)||r&&t[r]!==s[r])return void(t!==s&&L(n,l,t));if(Array.isArray(t)){if(t.length&&s.length&&(!o||r&&null!=t[0][r])){let n,l,i,u,c,a,f,d;for(i=0,u=Math.min(s.length,t.length);i<u&&(s[i]===t[i]||r&&s[i][r]===t[i][r]);i++)e(t[i],s,i,o,r);const h=new Array(t.length),p=new Map;for(u=s.length-1,c=t.length-1;u>=i&&c>=i&&(s[u]===t[c]||r&&s[u][r]===t[c][r]);u--,c--)h[c]=s[u];if(i>c||i>u){for(l=i;l<=c;l++)L(s,l,t[l]);for(;l<t.length;l++)L(s,l,h[l]),e(t[l],s,l,o,r);return void(s.length>t.length&&L(s,"length",t.length))}for(f=new Array(c+1),l=c;l>=i;l--)a=t[l],d=r?a[r]:a,n=p.get(d),f[l]=void 0===n?-1:n,p.set(d,l);for(n=i;n<=u;n++)a=s[n],d=r?a[r]:a,l=p.get(d),void 0!==l&&-1!==l&&(h[l]=s[n],l=f[l],p.set(d,l));for(l=i;l<t.length;l++)l in h?(L(s,l,h[l]),e(t[l],s,l,o,r)):L(s,l,t[l])}else for(let n=0,l=t.length;n<l;n++)e(t[n],s,n,o,r);return void(s.length>t.length&&L(s,"length",t.length))}const i=Object.keys(t);for(let n=0,l=i.length;n<l;n++)e(t[i[n]],s,i[n],o,r);const u=Object.keys(s);for(let e=0,n=u.length;e<n;e++)void 0===t[u[e]]&&L(s,u[e],void 0)}(e,{state:t},"state",n,l)}}const R=Symbol("fallback");function V(e,n,o){return"function"!=typeof n?(o=n||{},n=e,r):(o||(o={}),r(e));function r(e){let r=[],s=[],i=[],u=0;var c;return c=()=>{for(let e=0,t=i.length;e<t;e++)i[e]()},null===a?console.warn("cleanups created without a root or parent will never be run"):null===a.cleanups?a.cleanups=[c]:a.cleanups.push(c),()=>{let c,a,f=e()||[];return l(()=>{let e,n,l,h,p,g,y,v,m=f.length;if(0===m){if(0!==u){for(c=0;c<u;c++)i[c]();i=[],r=[],s=[],u=0}o.fallback&&(r=[R],s[0]=t(e=>(i[0]=e,o.fallback())),u=1)}else if(0===u){for(a=0;a<m;a++)r[a]=f[a],s[a]=t(d);u=m}else{for(l=new Array(m),h=new Array(m),p=0,g=Math.min(u,m);p<g&&r[p]===f[p];p++);for(g=u-1,y=m-1;g>=p&&y>=p&&r[g]===f[y];g--,y--)l[y]=s[g],h[y]=i[g];if(p>y){for(a=g;p<=a;a--)i[a]();const e=g-p+1;return e>0&&(s.splice(p,e),i.splice(p,e)),r=f.slice(0),u=m,s}if(p>g){for(a=p;a<=y;a++)s[a]=t(d);for(;a<m;a++)s[a]=l[a],i[a]=h[a];return r=f.slice(0),u=m,s}for(e=new Map,n=new Array(y+1),a=y;a>=p;a--)v=f[a],c=e.get(v),n[a]=void 0===c?-1:c,e.set(v,a);for(c=p;c<=g;c++)v=r[c],a=e.get(v),void 0!==a&&-1!==a?(l[a]=s[c],h[a]=i[c],a=n[a],e.set(v,a)):i[c]();for(a=p;a<m;a++)a in l?(s[a]=l[a],i[a]=h[a]):s[a]=t(d);u=s.length=m,r=f.slice(0)}return s});function d(e){return i[a]=e,n(f[a],a)}}}}function D(e,t){const n=document.createElement("template");if(n.innerHTML=e,n.innerHTML!==e)throw new Error(`Template html does not match input:\n${n.innerHTML}\n${e}`);let l=n.content.firstChild;return t&&(l=l.firstChild),l}function G(e,t,n){if(n)for(let e=0;e<n.length;e++)K(t,n[e]);return l(()=>e(t))}function J(e,t,l,o){if(void 0===l||o||(o=[]),"function"==typeof t)n((n=o)=>X(e,t(),n,l));else{if(!Array.isArray(t)||!function e(t){for(let n=0,l=t.length;n<l;n++){const l=t[n];if(Array.isArray(l)&&e(l)||"function"==typeof l)return!0}return!1}(t))return X(e,t,o,l);n((n=o)=>X(e,t,n,l))}}function K(e,t){const n=e[t];Object.defineProperty(e,t,{get:()=>n(),enumerable:!0})}function U(e,t,n){for(let l=0,o=t.length;l<o;l++)e.insertBefore(t[l],n)}function W(e,t,n,l){if(void 0===n)return e.textContent="";const o=l||document.createTextNode("");if(t.length){o!==t[0]&&e.replaceChild(o,t[0]);for(let n=t.length-1;n>0;n--)e.removeChild(t[n])}else e.insertBefore(o,n);return[o]}function X(e,t,l,o){if(t===l)return l;const r=typeof t,s=void 0!==o;if(e=s&&l[0]&&l[0].parentNode||e,"string"===r||"number"===r)if("number"===r&&(t=t.toString()),s){let n=l[0];n&&3===n.nodeType?n.data=t:n=document.createTextNode(t),l=W(e,l,o,n)}else l=""!==l&&"string"==typeof l?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===r)l=W(e,l,o);else if("function"===r)n(()=>l=X(e,t(),l,o));else if(Array.isArray(t)){const n=function e(t,n){for(let l=0,o=n.length;l<o;l++){let o,r=n[l];if(r instanceof Node)t.push(r);else if(null==r||!0===r||!1===r);else if(Array.isArray(r))e(t,r);else if("string"==(o=typeof r))t.push(document.createTextNode(r));else if("function"===o){const n=r();e(t,Array.isArray(n)?n:[n])}else t.push(document.createTextNode(r.toString()))}return t}([],t);if(0===n.length){if(l=W(e,l,o),s)return l}else Array.isArray(l)?0===l.length?U(e,n,o):Z(e,l,n):null==l||""===l?U(e,n):Z(e,s&&l||[e.firstChild],n);l=n}else if(t instanceof Node){if(Array.isArray(l)){if(s)return l=W(e,l,o,t);W(e,l,null,t)}else null==l||""===l?e.appendChild(t):e.replaceChild(t,e.firstChild);l=t}return l}var Y=-1;function Z(e,t,n){var l,o=n.length,r=0,s=t.length-1,i=0,u=o-1,c=t[r],a=n[i],f=t[s],d=n[u],h=f.nextSibling,p=!0;e:for(;p;){for(p=!1;a===c;){if(r++,++i>u||r>s)break e;a=n[i],c=t[r]}for(;d===f;){if(h=f,s--,i>--u||r>s)break e;d=n[u],f=t[s]}for(;a===f;){if(p=!0,e.insertBefore(f,c),s--,++i>u||r>s)break e;a=n[i],f=t[s]}for(;d===c;){if(p=!0,null===h?e.appendChild(c):e.insertBefore(c,h),h=c,r++,i>--u||r>s)break e;d=n[u],c=t[r]}}if(i>u){for(;r<=s;)e.removeChild(t[s]),s--;return}if(r>s){for(;i<=u;)e.insertBefore(n[i],h),i++;return}const g=new Array(u-i+1),y=new Map;for(let e=i;e<=u;e++)g[e]=Y,y.set(n[e],e);let v=i+n.length-1-u,m=[];for(let e=r;e<=s;e++)y.has(t[e])?(g[y.get(t[e])]=e,v++):m.push(e);if(0!==v){var w,b=function(e,t){let n=[],l=[],o=-1,r=new Array(e.length);for(let s=t,i=e.length;s<i;s++){let t=e[s];if(t<0)continue;let i=ee(n,t);-1!==i&&(r[s]=l[i]),i===o?(o++,n[o]=t,l[o]=s):t<n[i+1]&&(n[i+1]=t,l[i+1]=s)}for(let e=l[o];o>=0;e=r[e],o--)n[o]=e;return n}(g,i),A=[],C=t[r],x=b.length-1;for(let e=r;e<=s;e++)A[e]=C,C=C.nextSibling;for(let t=0;t<m.length;t++)e.removeChild(A[m[t]]);for(let t=u;t>=i;t--)b[x]===t?(h=A[g[b[x]]],x--):(w=g[t]===Y?n[t]:A[g[t]],e.insertBefore(w,h),h=w)}else{if(c!==e.firstChild||f!==e.lastChild){for(l=r;l<=s;l++)e.removeChild(t[l]);for(;i<=u;)e.insertBefore(n[i],h),i++;return}for(e.textContent="";i<=u;)e.appendChild(n[i]),i++}}function ee(e,t){var n=-1,l=e.length;if(l>0&&e[l-1]<=t)return l-1;for(;l-n>1;){var o=Math.floor((n+l)/2);e[o]>t?l=o:n=o}return n}function te(e){const t="fallback"in e&&{fallback:()=>e.fallback};return n=V(()=>e.each,e.children,t||void 0),(s=r(n,l)).comparator=o||null,()=>{if(null!==c){const e=s.state;if(0!=(7&e)&&g(s),s.age===i.time&&8===e)throw new Error("Circular dependency.");0==(16&e)&&(null===s.log&&(s.log={node1:null,node1slot:0,nodes:null,nodeslots:null}),p(s.log))}return s.value};var n,l,o,s}const ne=D('<table class="table table-striped latest-data"><tbody></tbody></table>'),le=D('<tr><td class="dbname"></td><td class="query-count"><span></span></td></tr>'),oe=D('<td><div class="popover left"><div class="popover-content"></div><div class="arrow"></div></div></td>');!function(e,n){let l;t(t=>{l=t,J(n,e())})}(()=>{const[e,t]=z({databases:[]}),l=()=>{Monitoring.renderRate.ping();const e=ENV.generateData().toArray();Promise.resolve(e).then(e=>t("databases",I(e,{merge:!0,key:null}))),setTimeout(l,ENV.timeout)};return setTimeout(l,0),function(){const t=ne.cloneNode(!0);return J(t.firstChild,G(te,{each:()=>e.databases,children:e=>{const t=e.dbName;return function(){const l=le.cloneNode(!0),o=l.firstChild,r=o.nextSibling.firstChild;o.textContent=t,r.textContent=e.lastSample.nbQueries;const s=r.firstChild;return J(l,G(te,{each:()=>e.lastSample.topFiveQueries,children:e=>(function(){const t=oe.cloneNode(!0),l=t.firstChild,o=l.firstChild;J(t,()=>e.formatElapsed,l),o.textContent=e.query;const r=o.firstChild;return n((n={})=>{const l=e.elapsedClassName,o=e.query;return l!==n._v$3&&(t.className=n._v$3=l),o!==n._v$4&&(r.data=n._v$4=o),n}),t})()},["each"]),null),n((t={})=>{const n=e.lastSample.countClassName,l=e.lastSample.nbQueries;return n!==t._v$&&(r.className=t._v$=n),l!==t._v$2&&(s.data=t._v$2=l),t}),l}()}},["each"])),t}()},document.getElementById("dbmon"))}();
